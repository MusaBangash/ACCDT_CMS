# School Management System - Project Structure

## Directory Layout

```
ACCDT_CMS/
├── app/                          # Main Flask application package
│   ├── __init__.py               # Flask app factory
│   ├── models.py                 # SQLAlchemy ORM models
│   ├── config.py                 # Configuration (dev/prod)
│   ├── decorators.py             # Custom decorators (role_required, etc.)
│   ├── utils.py                  # Helper functions
│   │
│   ├── routes/                   # Blueprints (modular routes)
│   │   ├── __init__.py
│   │   ├── auth.py               # Login, logout, registration
│   │   ├── dashboard.py          # Dashboard + API
│   │   ├── students.py           # Student CRUD + bulk upload
│   │   ├── courses.py            # Course CRUD
│   │   ├── attendance.py         # Attendance marking + API
│   │   ├── payments.py           # Payment recording + API
│   │   └── admin.py              # User management (admin panel)
│   │
│   ├── templates/                # Jinja2 HTML templates
│   │   ├── base.html             # Base template (navbar, layout)
│   │   ├── login.html            # Login page
│   │   ├── dashboard.html        # Dashboard with widgets + charts
│   │   ├── students.html         # Student list
│   │   ├── student_detail.html   # Student detail + edit
│   │   ├── courses.html          # Course list
│   │   ├── attendance.html       # Attendance marking page
│   │   ├── payments.html         # Payment recording page
│   │   ├── admin_users.html      # User management
│   │   └── error.html            # Error page (403, 404, 500, etc.)
│   │
│   └── static/                   # Static files
│       ├── css/
│       │   └── styles.css        # Custom CSS
│       ├── js/
│       │   ├── dashboard.js      # Dashboard chart/widget JS
│       │   ├── students.js       # Student form handling
│       │   └── common.js         # Shared utilities
│       └── uploads/              # Student photos, documents
│
├── migrations/                   # Flask-Migrate (Alembic) versions
│   └── (auto-generated by Flask-Migrate)
│
├── tests/                        # Pytest unit tests
│   ├── __init__.py
│   ├── conftest.py               # Pytest fixtures
│   ├── test_auth.py              # Auth tests
│   └── test_models.py            # Model tests
│
├── .env                          # Environment variables (NOT in git)
├── .gitignore                    # Git ignore patterns
├── requirements.txt              # Python dependencies
├── run.py                        # Entry point (flask run)
├── manage.py                     # Migration management (Flask-Script alt)
├── seed_data.sql                 # Sample data for dev
├── README.md                     # Project documentation
├── nginx.conf                    # Nginx reverse proxy config (deployment)
├── gunicorn.service              # Systemd service file (deployment)
└── PROJECT_STRUCTURE.md          # This file
```

---

## File Responsibilities

| File/Folder | Purpose |
|---|---|
| `app/__init__.py` | Flask app factory; initializes extensions (db, login_manager, etc.) |
| `app/models.py` | SQLAlchemy models (User, Student, Course, Enrollment, Attendance, Payment) |
| `app/config.py` | Configuration classes (Dev, Test, Prod with DB URIs, secret keys) |
| `app/decorators.py` | Custom `@login_required`, `@roles_required('admin')` decorators |
| `app/utils.py` | Helper functions (upload handlers, validators, formatters) |
| `app/routes/auth.py` | Auth Blueprint: login, logout, initial admin registration |
| `app/routes/dashboard.py` | Dashboard Blueprint: HTML render + `/api/dashboard` JSON endpoint |
| `app/routes/students.py` | Students Blueprint: CRUD, register form, bulk CSV upload |
| `app/routes/courses.py` | Courses Blueprint: CRUD |
| `app/routes/attendance.py` | Attendance Blueprint: mark attendance, `/api/attendance` |
| `app/routes/payments.py` | Payments Blueprint: record payment, generate receipt (stub) |
| `app/routes/admin.py` | Admin Blueprint: user management, role assignment |
| `app/templates/base.html` | Base layout with navbar, footer, Bootstrap 5 |
| `app/templates/dashboard.html` | Dashboard page with chart containers and widget divs |
| `app/static/css/styles.css` | Custom CSS overrides |
| `app/static/js/dashboard.js` | Fetch `/api/dashboard`, render charts (Chart.js) |
| `app/static/uploads/` | Photos, documents (created at runtime) |
| `run.py` | Entry point; creates and runs the Flask app |
| `requirements.txt` | Python packages (Flask, SQLAlchemy, etc.) |
| `seed_data.sql` | INSERT statements for test data |
| `migrations/` | Alembic version control (auto-generated) |

---

## Technology Stack

- **Backend**: Flask (Python 3.9+)
- **Database**: SQLite (dev) / PostgreSQL (prod)
- **ORM**: SQLAlchemy
- **Auth**: Flask-Login + Werkzeug
- **Forms**: Flask-WTF
- **Database Migrations**: Flask-Migrate (Alembic)
- **Password Hashing**: Werkzeug (built-in)
- **Frontend**: Bootstrap 5, HTML5, Vanilla JS
- **Charts**: Chart.js
- **Deployment**: Gunicorn + Nginx + systemd (Ubuntu 22.04)

---

## Key Features Overview

1. **Multi-role Authentication**: Admin, Accountant, Teacher
2. **Student Management**: CRUD, categories, photo upload
3. **Course Management**: Create/edit courses with seat limits
4. **Enrollment**: Assign students to courses
5. **Attendance**: Mark attendance per course/date
6. **Payments**: Record fees, generate receipts
7. **Dashboard**: Real-time stats, charts
8. **Admin Panel**: User management, role assignment
9. **Security**: CSRF protection, role-based access, password hashing
10. **API**: JSON endpoints for dashboard, students, courses, attendance, payments

---

## Next Steps

1. Create `requirements.txt` with all dependencies
2. Create `app/config.py` with SQLite/Postgres configurations
3. Create `app/models.py` with SQLAlchemy models
4. Create `app/__init__.py` with app factory
5. Create authentication routes
6. Create remaining blueprints
7. Create HTML templates
8. Deploy with Gunicorn + Nginx

